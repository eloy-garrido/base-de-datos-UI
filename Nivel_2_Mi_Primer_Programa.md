# Nivel 2: Mi Primer Programa de Conexi√≥n a Base de Datos

## üéØ Objetivo
Crear un programa Python s√∫per simple que se conecte a MySQL y nos muestre si la conexi√≥n funciona.

---

## üìã Prerrequisitos
- ‚úÖ Nivel 0 completado (Python instalado)
- ‚úÖ Nivel 1 completado (MySQL funcionando con `mi_primera_db`)

---

## üìö Conceptos Nuevos (Explicados Simple)

### **¬øQu√© es un programa?**
Un programa es una lista de instrucciones que le damos a la computadora. Es como una receta de cocina: paso 1, paso 2, paso 3, etc.

### **¬øQu√© significa "conectar a la base de datos"?**
Es como hacer una llamada telef√≥nica entre nuestro programa Python y MySQL. Si la llamada se conecta, podemos enviar y recibir informaci√≥n.

### **T√©rminos de programaci√≥n:**
- **Variable**: Caja donde guardamos informaci√≥n (como `nombre = "Juan"`)
- **Funci√≥n**: Conjunto de instrucciones que hace algo espec√≠fico
- **Importar**: Usar c√≥digo que otros programadores ya escribieron
- **Try/Except**: "Intenta hacer esto, si no funciona, haz esto otro"

---

## üíª Paso 1: Crear Nuestro Programa

### **1.1 Crear la carpeta y archivo**
1. Ve a tu Escritorio
2. Abre la carpeta `Mi_Proyecto_Base_Datos`
3. Entra a la carpeta `codigo`
4. Crea un archivo nuevo llamado `test_conexion.py`

### **1.2 Escribir el c√≥digo completo**

Abre `test_conexion.py` en tu editor de c√≥digo y escribe este c√≥digo exactamente:

```python
# test_conexion.py
# Mi primer programa que se conecta a MySQL
# 
# Este programa hace lo siguiente:
# 1. Se conecta a la base de datos MySQL
# 2. Cuenta cu√°ntas personas hay en nuestra tabla
# 3. Muestra los nombres y edades
# 4. Abre una ventana para mostrar si todo funcion√≥

# ==================================================
# PASO 1: IMPORTAR LIBRER√çAS
# ==================================================
# Una librer√≠a es c√≥digo que otros programadores ya escribieron
# Es como usar una receta que alguien m√°s ya invent√≥

print("üì¶ Importando librer√≠as...")

# Importar mysql.connector para hablar con MySQL
# Sin esto, Python no sabr√≠a c√≥mo conectarse a bases de datos
import mysql.connector

# Importar tkinter para crear ventanas
# tkinter = "Tk interface" = interfaz gr√°fica
import tkinter as tk

# Importar messagebox para mostrar mensajes emergentes
from tkinter import messagebox

print("‚úÖ Librer√≠as importadas correctamente")

# ==================================================
# PASO 2: FUNCI√ìN PARA PROBAR LA CONEXI√ìN
# ==================================================
# Una funci√≥n es como crear una "mini-m√°quina" que hace algo espec√≠fico
# Puedes usar esta m√°quina cuantas veces quieras

def probar_conexion():
    """
    Esta funci√≥n intenta conectarse a MySQL.
    
    ¬øQu√© hace?
    - Usa los datos de conexi√≥n (host, puerto, usuario, etc.)
    - Intenta conectarse a MySQL
    - Si funciona: obtiene informaci√≥n de la base de datos
    - Si no funciona: nos dice qu√© pas√≥
    
    Retorna:
    - True si la conexi√≥n funcion√≥
    - False si hubo alg√∫n problema
    """
    
    print("\nüîç Iniciando prueba de conexi√≥n...")
    
    # --------------------------------------------------
    # DATOS DE CONEXI√ìN
    # --------------------------------------------------
    # Estas son las "coordenadas" para encontrar nuestra base de datos
    # Es como tener la direcci√≥n y tel√©fono de alguien antes de visitarlo
    
    host = "localhost"        # localhost = mi propia computadora
    puerto = 3306             # 3306 es el n√∫mero "telef√≥nico" de MySQL
    usuario = "root"          # root = usuario administrador de MySQL
    password = ""             # Vac√≠a = sin contrase√±a (configuraci√≥n de XAMPP)
    base_datos = "mi_primera_db"  # El nombre de nuestra base de datos
    
    # Mostrar los datos que vamos a usar (para verificar)
    print(f"üìã Datos de conexi√≥n:")
    print(f"   Host: {host}")
    print(f"   Puerto: {puerto}")
    print(f"   Usuario: {usuario}")
    print(f"   Base de datos: {base_datos}")
    
    # --------------------------------------------------
    # INTENTAR LA CONEXI√ìN CON TRY/EXCEPT
    # --------------------------------------------------
    # try/except es como decir:
    # "Intenta hacer esto, si no funciona, no te cierres, mejor dime qu√© pas√≥"
    
    try:
        # TRY = "Intenta hacer esto..."
        print("\nüîå Intentando conectar...")
        
        # Esta l√≠nea es MUY IMPORTANTE
        # Le dice a Python: "Con√©ctate a MySQL usando estos datos"
        conexion = mysql.connector.connect(
            host=host,              # ¬øD√≥nde est√° MySQL? En localhost
            port=puerto,            # ¬øEn qu√© puerto? En 3306
            user=usuario,           # ¬øCon qu√© usuario? Con root
            password=password,      # ¬øCon qu√© contrase√±a? Ninguna
            database=base_datos     # ¬øQu√© base de datos usar? mi_primera_db
        )
        
        # Verificar si realmente estamos conectados
        # is_connected() pregunta: "¬øEst√° funcionando la conexi√≥n?"
        if conexion.is_connected():
            print("üéâ ¬°CONEXI√ìN EXITOSA!")
            
            # -----------------------------------------------
            # HACER CONSULTAS A LA BASE DE DATOS
            # -----------------------------------------------
            # Un cursor es como un "mensajero" que lleva nuestras preguntas
            # a la base de datos y nos trae las respuestas
            cursor = conexion.cursor()
            
            # Pregunta 1: ¬øCu√°ntas personas hay en total?
            # COUNT(*) = cuenta todas las filas
            cursor.execute("SELECT COUNT(*) FROM personas")
            
            # fetchone() = "tr√°eme UNA respuesta"
            # [0] = toma el primer (y √∫nico) n√∫mero de la respuesta
            cantidad = cursor.fetchone()[0]
            
            print(f"üìä Informaci√≥n de la base de datos:")
            print(f"   ‚úÖ Conectado a: {base_datos}")
            print(f"   üë• Personas en la tabla: {cantidad}")
            
            # Pregunta 2: ¬øCu√°les son los nombres y edades?
            cursor.execute("SELECT nombre, edad FROM personas")
            
            # fetchall() = "tr√°eme TODAS las respuestas"
            personas = cursor.fetchall()
            
            print(f"   üìã Lista de personas:")
            # Un bucle for es como decir: "Para cada persona en la lista..."
            for persona in personas:
                # persona[0] = nombre, persona[1] = edad
                print(f"      ‚Ä¢ {persona[0]} ({persona[1]} a√±os)")
            
            # -----------------------------------------------
            # CERRAR LA CONEXI√ìN CORRECTAMENTE
            # -----------------------------------------------
            # Es importante cerrar las conexiones cuando terminamos
            # Es como colgar el tel√©fono despu√©s de hablar
            cursor.close()      # Cerrar el "mensajero"
            conexion.close()    # Cerrar la "llamada telef√≥nica"
            print("\nüîê Conexi√≥n cerrada correctamente")
            
            return True  # Regresa "True" = "Todo sali√≥ bien"
            
    except mysql.connector.Error as error:
        # EXCEPT = "Si algo sali√≥ mal, haz esto..."
        # mysql.connector.Error = errores espec√≠ficos de MySQL
        print(f"‚ùå Error de MySQL: {error}")
        
        # Explicar posibles causas del error
        print("üí° Posibles soluciones:")
        print("   ‚Ä¢ ¬øEst√° XAMPP ejecut√°ndose?")
        print("   ‚Ä¢ ¬øEst√° MySQL verde en XAMPP Control Panel?")
        print("   ‚Ä¢ ¬øExiste la base de datos 'mi_primera_db'?")
        
        return False  # Regresa "False" = "Algo sali√≥ mal"
        
    except Exception as error:
        # Exception = cualquier otro tipo de error
        print(f"‚ùå Error general: {error}")
        print("üí° Esto puede ser un problema de configuraci√≥n de Python")
        
        return False

# ==================================================
# PASO 3: FUNCI√ìN PARA CREAR LA VENTANA DE RESULTADO
# ==================================================

def crear_ventana_resultado(conexion_exitosa):
    """
    Esta funci√≥n crea una ventana para mostrar si la conexi√≥n funcion√≥ o no.
    
    Par√°metros:
    - conexion_exitosa: True si funcion√≥, False si no funcion√≥
    
    ¬øQu√© hace?
    - Crea una ventana nueva
    - Muestra colores verdes si funcion√≥, rojos si no funcion√≥
    - Muestra un mensaje apropiado
    - Agrega un bot√≥n para cerrar
    """
    
    print("\nüñºÔ∏è Creando ventana de resultado...")
    
    # Crear la ventana principal
    # Tk() crea una ventana vac√≠a
    ventana = tk.Tk()
    
    # Configurar propiedades de la ventana
    ventana.title("üîó Test de Conexi√≥n MySQL")  # T√≠tulo en la barra superior
    ventana.geometry("450x350")                  # Tama√±o: 450x350 p√≠xeles
    ventana.resizable(False, False)              # No permitir cambiar tama√±o
    
    # --------------------------------------------------
    # DECIDIR COLORES Y MENSAJES SEG√öN EL RESULTADO
    # --------------------------------------------------
    
    if conexion_exitosa:
        # Si la conexi√≥n funcion√≥ = colores verdes y mensaje de √©xito
        color_fondo = "#d4edda"    # Verde claro para el fondo
        color_texto = "#155724"    # Verde oscuro para el texto
        emoji = "‚úÖ"               # Emoji de √©xito
        titulo = "¬°CONEXI√ìN EXITOSA!"
        
        # Mensaje largo explicando qu√© significa el √©xito
        mensaje = """¬°Felicitaciones! üéâ

Tu programa Python se conect√≥ 
correctamente a MySQL.

Esto significa que:
‚úÖ Python est√° funcionando
‚úÖ MySQL est√° activo
‚úÖ La base de datos existe
‚úÖ Los datos de conexi√≥n son correctos

¬°Ya puedes crear aplicaciones 
que trabajen con bases de datos!

Revisa la l√≠nea de comandos para 
ver los datos que se obtuvieron."""
        
    else:
        # Si la conexi√≥n fall√≥ = colores rojos y mensaje de error
        color_fondo = "#f8d7da"    # Rojo claro para el fondo
        color_texto = "#721c24"    # Rojo oscuro para el texto
        emoji = "‚ùå"               # Emoji de error
        titulo = "Error de Conexi√≥n"
        
        # Mensaje con sugerencias para resolver el problema
        mensaje = """No se pudo conectar a MySQL üòû

Posibles problemas:
‚ùì ¬øEst√° XAMPP ejecut√°ndose?
‚ùì ¬øEst√° MySQL activo (verde)?
‚ùì ¬øCompletaste el Nivel 1?
‚ùì ¬øExiste la base de datos 'mi_primera_db'?
‚ùì ¬øCambiaste el puerto a 3307?

Revisa estos puntos en orden y 
vuelve a ejecutar el programa.

Mira la l√≠nea de comandos para 
m√°s detalles del error."""
    
    # --------------------------------------------------
    # CONFIGURAR EL FONDO DE LA VENTANA
    # --------------------------------------------------
    # configure() cambia las propiedades de la ventana
    # bg = background = color de fondo
    ventana.configure(bg=color_fondo)
    
    # --------------------------------------------------
    # CREAR Y POSICIONAR LOS ELEMENTOS VISUALES
    # --------------------------------------------------
    
    # Elemento 1: Emoji grande arriba
    etiqueta_emoji = tk.Label(
        ventana,                    # ¬øEn qu√© ventana?
        text=emoji,                 # ¬øQu√© texto mostrar?
        font=("Arial", 40),         # ¬øQu√© fuente y tama√±o?
        bg=color_fondo,             # ¬øColor de fondo?
        fg=color_texto              # ¬øColor del texto?
    )
    # pack() coloca el elemento en la ventana
    # pady = padding vertical = espacio arriba y abajo
    etiqueta_emoji.pack(pady=10)
    
    # Elemento 2: T√≠tulo principal
    etiqueta_titulo = tk.Label(
        ventana,
        text=titulo,
        font=("Arial", 16, "bold"),  # 16 = tama√±o, bold = negritas
        bg=color_fondo,
        fg=color_texto
    )
    etiqueta_titulo.pack(pady=5)
    
    # Elemento 3: Mensaje explicativo
    etiqueta_mensaje = tk.Label(
        ventana,
        text=mensaje,
        font=("Arial", 10),
        bg=color_fondo,
        fg=color_texto,
        justify="center"             # justify = alineaci√≥n del texto
    )
    # padx = padding horizontal = espacio a los lados
    etiqueta_mensaje.pack(pady=10, padx=20)
    
    # Elemento 4: Bot√≥n para cerrar la ventana
    boton_cerrar = tk.Button(
        ventana,
        text="Cerrar",               # Texto del bot√≥n
        font=("Arial", 12),
        command=ventana.destroy,     # ¬øQu√© hacer al hacer clic? Cerrar ventana
        bg="#6c757d",                # Color de fondo del bot√≥n (gris)
        fg="white"                   # Color del texto del bot√≥n (blanco)
    )
    boton_cerrar.pack(pady=10)
    
    print("‚úÖ Ventana creada correctamente")
    
    # --------------------------------------------------
    # MOSTRAR LA VENTANA Y ESPERAR
    # --------------------------------------------------
    # mainloop() = "mant√©n la ventana abierta hasta que el usuario la cierre"
    # Sin esto, la ventana aparecer√≠a y desaparecer√≠a inmediatamente
    ventana.mainloop()

# ==================================================
# PASO 4: FUNCI√ìN PRINCIPAL
# ==================================================

def main():
    """
    Funci√≥n principal que ejecuta todo el programa.
    
    ¬øQu√© hace?
    1. Muestra mensaje de inicio
    2. Llama a probar_conexion()
    3. Muestra el resultado en pantalla
    4. Llama a crear_ventana_resultado()
    5. Muestra mensaje de fin
    
    Esta funci√≥n coordina todo el programa.
    """
    
    print("üöÄ Iniciando programa de test de conexi√≥n")
    print("=" * 50)  # L√≠nea decorativa de 50 caracteres "="
    
    # Llamar a la funci√≥n que prueba la conexi√≥n
    # resultado ser√° True si funcion√≥, False si no funcion√≥
    resultado = probar_conexion()
    
    # Mostrar l√≠nea decorativa y resultado final
    print("\n" + "=" * 50)
    if resultado:
        print("üéØ RESULTADO: Conexi√≥n exitosa")
        print("üéâ ¬°Tu programa funcion√≥ perfectamente!")
    else:
        print("üéØ RESULTADO: Error de conexi√≥n")
        print("üîß Revisa los mensajes de error arriba para solucionarlo")
    
    # Mostrar ventana gr√°fica con el resultado
    print("\nüì± Abriendo ventana de resultado...")
    crear_ventana_resultado(resultado)
    
    print("\nüëã ¬°Programa terminado!")
    print("üí° Si tuviste √©xito, ya sabes c√≥mo conectar Python con MySQL")

# ==================================================
# PUNTO DE ENTRADA DEL PROGRAMA
# ==================================================

# Esta l√≠nea especial verifica si estamos ejecutando este archivo directamente
# Si es as√≠, ejecuta la funci√≥n main()
# Si alguien importa este archivo desde otro programa, no se ejecuta autom√°ticamente

if __name__ == "__main__":
    # __name__ es una variable especial de Python
    # Si ejecutamos este archivo directamente, __name__ ser√° "__main__"
    # Si importamos este archivo, __name__ ser√° "test_conexion"
    
    main()  # Llamar a la funci√≥n principal

# ==================================================
# FIN DEL PROGRAMA
# ==================================================

# ¬°Felicitaciones! Has escrito tu primer programa que:
# ‚úÖ Se conecta a una base de datos real
# ‚úÖ Obtiene informaci√≥n de una tabla
# ‚úÖ Muestra una interfaz gr√°fica
# ‚úÖ Maneja errores de forma profesional
# ‚úÖ Est√° bien documentado y es f√°cil de entender

# Pr√≥ximo paso: Expandir este programa para insertar, 
# actualizar o eliminar datos de la base de datos.
```

---

## üîç Explicaci√≥n Detallada por Secciones

### **Secci√≥n 1: Importaciones**
```python
import mysql.connector
import tkinter as tk
from tkinter import messagebox
```
**¬øPor qu√© estas librer√≠as?**
- `mysql.connector`: Es el "traductor" entre Python y MySQL
- `tkinter`: Nos permite crear ventanas, botones, mensajes
- `messagebox`: Para mostrar alertas y mensajes emergentes

### **Secci√≥n 2: Funci√≥n probar_conexion()**
**¬øQu√© hace cada parte?**

**Variables de conexi√≥n:**
```python
host = "localhost"
puerto = 3306
usuario = "root"
password = ""
base_datos = "mi_primera_db"
```
- `host`: Direcci√≥n del servidor (localhost = tu computadora)
- `puerto`: "N√∫mero telef√≥nico" de MySQL (3306 es el est√°ndar)
- `usuario`: Nombre de usuario (root = administrador)
- `password`: Contrase√±a (vac√≠a en XAMPP por defecto)
- `base_datos`: Nombre de nuestra base de datos

**Try/Except:**
```python
try:
    # C√≥digo que puede fallar
except mysql.connector.Error as error:
    # Errores espec√≠ficos de MySQL
except Exception as error:
    # Cualquier otro error
```
**¬øPor qu√© es importante?** Sin try/except, si algo sale mal, el programa se cierra abruptamente. Con try/except, podemos manejar los errores elegantemente.

### **Secci√≥n 3: Funci√≥n crear_ventana_resultado()**
**¬øQu√© hace cada elemento?**

**Crear ventana:**
```python
ventana = tk.Tk()
ventana.title("üîó Test de Conexi√≥n MySQL")
ventana.geometry("450x350")
```
- `Tk()`: Crea una ventana vac√≠a
- `title()`: Pone texto en la barra superior
- `geometry()`: Define el tama√±o en p√≠xeles

**Elementos visuales:**
```python
etiqueta_emoji = tk.Label(ventana, text=emoji, font=("Arial", 40))
etiqueta_emoji.pack(pady=10)
```
- `Label`: Crea texto que se muestra en la ventana
- `pack()`: Coloca el elemento en la ventana
- `pady`: Espacio vertical alrededor del elemento

### **Secci√≥n 4: Funci√≥n main()**
**¬øPor qu√© existe?**
La funci√≥n `main()` es como el "director de orquesta" que coordina todo:
1. Inicia el programa
2. Llama a las otras funciones en orden
3. Maneja los resultados
4. Termina el programa

### **Secci√≥n 5: if __name__ == "__main__":**
**¬øQu√© significa esto?**
```python
if __name__ == "__main__":
    main()
```
Es una convenci√≥n de Python que significa: "Si estamos ejecutando este archivo directamente (no import√°ndolo), entonces ejecuta main()".

---

## ‚ñ∂Ô∏è Paso 2: Ejecutar el Programa

### **2.1 Preparativos**
1. **Aseg√∫rate de que XAMPP est√© ejecut√°ndose**
2. **Verifica que MySQL est√© verde (Running)**
3. **Confirma que completaste el Nivel 1**

### **2.2 Ejecutar desde la l√≠nea de comandos**
1. Abre cmd (l√≠nea de comandos)
2. Navega a tu carpeta:
   ```bash
   cd Desktop/Mi_Proyecto_Base_Datos/codigo
   ```
3. Ejecuta el programa:
   ```bash
   python test_conexion.py
   ```

### **2.3 ¬øQu√© deber√≠as ver?**

**En la l√≠nea de comandos (si todo funciona):**
```
üì¶ Importando librer√≠as...
‚úÖ Librer√≠as importadas correctamente
üöÄ Iniciando programa de test de conexi√≥n
==================================================
üîç Iniciando prueba de conexi√≥n...
üìã Datos de conexi√≥n:
   Host: localhost
   Puerto: 3306
   Usuario: root
   Base de datos: mi_primera_db
üîå Intentando conectar...
üéâ ¬°CONEXI√ìN EXITOSA!
üìä Informaci√≥n de la base de datos:
   ‚úÖ Conectado a: mi_primera_db
   üë• Personas en la tabla: 3
   üìã Lista de personas:
      ‚Ä¢ Juan (25 a√±os)
      ‚Ä¢ Mar√≠a (30 a√±os)
      ‚Ä¢ Carlos (20 a√±os)
üîê Conexi√≥n cerrada correctamente
==================================================
üéØ RESULTADO: Conexi√≥n exitosa
üéâ ¬°Tu programa funcion√≥ perfectamente!
üì± Abriendo ventana de resultado...
‚úÖ Ventana creada correctamente
üëã ¬°Programa terminado!
üí° Si tuviste √©xito, ya sabes c√≥mo conectar Python con MySQL
```

**Y adem√°s aparecer√° una ventana verde con el mensaje de √©xito! üéâ**

---

## üõ†Ô∏è Soluci√≥n de Problemas

### **Error: "No module named 'mysql'"**
**Problema:** La librer√≠a mysql-connector-python no est√° instalada
**Soluci√≥n:**
```bash
pip install mysql-connector-python
```

### **Error: "python no se reconoce como comando"**
**Problema:** Python no est√° en el PATH
**Soluci√≥n:** Revisa el Nivel 0, secci√≥n sobre problemas del PATH

### **Error de conexi√≥n a MySQL**
**Problema:** MySQL no est√° disponible
**Soluci√≥n paso a paso:**
1. ¬øEst√° XAMPP abierto? Si no, √°brelo
2. ¬øEst√° MySQL verde en XAMPP? Si no, haz clic en "Start"
3. ¬øCambiaste el puerto a 3307? Entonces modifica esta l√≠nea en el c√≥digo:
   ```python
   puerto = 3307  # Cambia de 3306 a 3307
   ```

### **Error: "Database 'mi_primera_db' doesn't exist"**
**Problema:** La base de datos no existe
**Soluci√≥n:** Vuelve al Nivel 1 y ejecuta el c√≥digo SQL para crear la base de datos

---

## ‚úÖ Lista de Verificaci√≥n

Si todo funcion√≥ correctamente, deber√≠as tener:
- [ ] El programa se ejecuta sin errores
- [ ] Aparecen mensajes informativos en la l√≠nea de comandos
- [ ] Se abre una ventana verde con "¬°CONEXI√ìN EXITOSA!"
- [ ] Se muestran los 3 nombres y edades de la base de datos
- [ ] El programa termina correctamente

---

## üéì ¬°Felicitaciones!

Has creado tu primer programa que:
1. **Se conecta a una base de datos real** ‚úÖ
2. **Obtiene informaci√≥n de una tabla** ‚úÖ
3. **Muestra una interfaz gr√°fica** ‚úÖ
4. **Maneja errores de forma profesional** ‚úÖ
5. **Est√° completamente documentado** ‚úÖ

**¬øQu√© aprendiste?**
- ‚úÖ C√≥mo importar y usar librer√≠as
- ‚úÖ C√≥mo crear y usar funciones
- ‚úÖ C√≥mo conectar Python con MySQL
- ‚úÖ C√≥mo ejecutar consultas SQL desde Python
- ‚úÖ C√≥mo crear ventanas simples
- ‚úÖ C√≥mo manejar errores con try/except
- ‚úÖ C√≥mo organizar c√≥digo de forma profesional

**Pr√≥ximo paso:** Ahora puedes expandir este programa para hacer operaciones m√°s complejas como insertar, actualizar o eliminar datos.